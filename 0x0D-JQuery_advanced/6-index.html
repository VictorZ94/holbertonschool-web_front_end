<!DOCTYPE html>
<html lang="en" dir="ltr">

    <head>

        <meta charset="utf-8" />
        <title>Task 0</title>
        <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>
    </head>

    <body>


        <script type="application/javascript">
            function createFamilyTree() {
                $('body').append(`
                    <table>
                        <thead>
                            <tr>
                                <th>Firstname</th>
                                <th>Lastname</th>
                            </tr>
                        </thead>
                    </table>
                `);
                $('table').append('<tbody></tbody>')
            }

            function addNewMember(firstName, lastName, position) {
                if (position === 'before') {
                    $('tbody').prepend(`
                        <tr>
                            <td>${firstName}</td>
                            <td>${lastName}</td>
                            <td>(x)</td>
                        </tr>`
                    )
                    $('tbody tr:first td:last').click(function (e) {
                        e.target.closest('tr').remove();
                    });
                    $('tbody tr:first td:last').css('background-color', 'orange');
                } else {
                    $('tbody').append(`
                        <tr>
                            <td>${firstName}</td>
                            <td>${lastName}</td>
                            <td>(x)</td>
                        </tr>`
                    )
                    $('tbody tr td:last').click(function (e) {
                            e.target.closest('tr').remove();
                    });
                    $('tbody tr td:last').css('background-color', 'orange');
                }
            }

            function createForm() {
                $('table').before(`
                    <input type="text">
                    <input type="text">
                    <select>
                        <option value="before">Before</option>
                        <option value="after">After</option>
                    </select>
                    <input type="submit" value="Submit">
                `);
                $('input[type="submit"]').click(function () {
                    addNewMember($('input').val(), $('input:nth-of-type(2)').val(), $('select').val());
                });
            }

            $().ready(
                createFamilyTree(),
                createForm()
            );
        </script>
    </body>
</html>
